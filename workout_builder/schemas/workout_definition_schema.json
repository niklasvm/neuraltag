{
  "$defs": {
    "CadenceRangeTarget": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "cadence_range",
          "default": "cadence_range",
          "title": "Type",
          "type": "string"
        },
        "low": {
          "exclusiveMinimum": 0,
          "title": "Low",
          "type": "integer"
        },
        "high": {
          "exclusiveMinimum": 0,
          "title": "High",
          "type": "integer"
        },
        "unit": {
          "const": "rpm",
          "title": "Unit",
          "type": "string"
        }
      },
      "required": [
        "low",
        "high",
        "unit"
      ],
      "title": "CadenceRangeTarget",
      "type": "object"
    },
    "DurationSpec": {
      "properties": {
        "value": {
          "anyOf": [
            {
              "exclusiveMinimum": 0.0,
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Value"
        },
        "unit": {
          "anyOf": [
            {
              "$ref": "#/$defs/DurationUnit"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "open": {
          "default": false,
          "title": "Open",
          "type": "boolean"
        }
      },
      "title": "DurationSpec",
      "type": "object"
    },
    "DurationUnit": {
      "enum": [
        "s",
        "sec",
        "second",
        "seconds",
        "m",
        "min",
        "mins",
        "minute",
        "minutes",
        "km",
        "m"
      ],
      "title": "DurationUnit",
      "type": "string"
    },
    "GroupStep": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Name"
        },
        "intensity": {
          "anyOf": [
            {
              "$ref": "#/$defs/Intensity"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "type": {
          "const": "group",
          "default": "group",
          "title": "Type",
          "type": "string"
        },
        "repeat": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Repeat"
        },
        "mode": {
          "anyOf": [
            {
              "$ref": "#/$defs/RepeatMode"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "children": {
          "items": {
            "$ref": "#/$defs/SimpleStep"
          },
          "title": "Children",
          "type": "array"
        }
      },
      "required": [
        "children"
      ],
      "title": "GroupStep",
      "type": "object"
    },
    "HROffsetMode": {
      "enum": [
        "add_100",
        "raw"
      ],
      "title": "HROffsetMode",
      "type": "string"
    },
    "HRRangeTarget": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "heart_rate_range",
          "default": "heart_rate_range",
          "title": "Type",
          "type": "string"
        },
        "low": {
          "exclusiveMinimum": 0,
          "title": "Low",
          "type": "integer"
        },
        "high": {
          "exclusiveMinimum": 0,
          "title": "High",
          "type": "integer"
        },
        "unit": {
          "const": "bpm",
          "title": "Unit",
          "type": "string"
        }
      },
      "required": [
        "low",
        "high",
        "unit"
      ],
      "title": "HRRangeTarget",
      "type": "object"
    },
    "HRZoneTarget": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "heart_rate_zone",
          "default": "heart_rate_zone",
          "title": "Type",
          "type": "string"
        },
        "zone": {
          "exclusiveMinimum": 0,
          "title": "Zone",
          "type": "integer"
        }
      },
      "required": [
        "zone"
      ],
      "title": "HRZoneTarget",
      "type": "object"
    },
    "Intensity": {
      "enum": [
        "warmup",
        "active",
        "rest",
        "cooldown"
      ],
      "title": "Intensity",
      "type": "string"
    },
    "OpenTarget": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "open",
          "default": "open",
          "title": "Type",
          "type": "string"
        }
      },
      "title": "OpenTarget",
      "type": "object"
    },
    "PaceRangeTarget": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "pace_range",
          "default": "pace_range",
          "title": "Type",
          "type": "string"
        },
        "low": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "integer"
            }
          ],
          "title": "Low"
        },
        "high": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "integer"
            }
          ],
          "title": "High"
        },
        "unit": {
          "const": "min_per_km",
          "title": "Unit",
          "type": "string"
        }
      },
      "required": [
        "low",
        "high",
        "unit"
      ],
      "title": "PaceRangeTarget",
      "type": "object"
    },
    "PaceTarget": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "pace",
          "default": "pace",
          "title": "Type",
          "type": "string"
        },
        "value": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "integer"
            }
          ],
          "title": "Value"
        },
        "unit": {
          "const": "min_per_km",
          "title": "Unit",
          "type": "string"
        }
      },
      "required": [
        "value",
        "unit"
      ],
      "title": "PaceTarget",
      "type": "object"
    },
    "PowerRangeTarget": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "power_range",
          "default": "power_range",
          "title": "Type",
          "type": "string"
        },
        "low": {
          "exclusiveMinimum": 0,
          "title": "Low",
          "type": "integer"
        },
        "high": {
          "exclusiveMinimum": 0,
          "title": "High",
          "type": "integer"
        },
        "unit": {
          "const": "watts",
          "title": "Unit",
          "type": "string"
        }
      },
      "required": [
        "low",
        "high",
        "unit"
      ],
      "title": "PowerRangeTarget",
      "type": "object"
    },
    "PowerZoneTarget": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "power_zone",
          "default": "power_zone",
          "title": "Type",
          "type": "string"
        },
        "zone": {
          "exclusiveMinimum": 0,
          "title": "Zone",
          "type": "integer"
        }
      },
      "required": [
        "zone"
      ],
      "title": "PowerZoneTarget",
      "type": "object"
    },
    "RepeatMode": {
      "enum": [
        "controller",
        "expand"
      ],
      "title": "RepeatMode",
      "type": "string"
    },
    "SimpleStep": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Name"
        },
        "intensity": {
          "anyOf": [
            {
              "$ref": "#/$defs/Intensity"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "type": {
          "const": "simple",
          "default": "simple",
          "title": "Type",
          "type": "string"
        },
        "duration": {
          "$ref": "#/$defs/DurationSpec"
        },
        "target": {
          "anyOf": [
            {
              "discriminator": {
                "mapping": {
                  "cadence_range": "#/$defs/CadenceRangeTarget",
                  "heart_rate_range": "#/$defs/HRRangeTarget",
                  "heart_rate_zone": "#/$defs/HRZoneTarget",
                  "open": "#/$defs/OpenTarget",
                  "pace": "#/$defs/PaceTarget",
                  "pace_range": "#/$defs/PaceRangeTarget",
                  "power_range": "#/$defs/PowerRangeTarget",
                  "power_zone": "#/$defs/PowerZoneTarget"
                },
                "propertyName": "type"
              },
              "oneOf": [
                {
                  "$ref": "#/$defs/OpenTarget"
                },
                {
                  "$ref": "#/$defs/PaceTarget"
                },
                {
                  "$ref": "#/$defs/PaceRangeTarget"
                },
                {
                  "$ref": "#/$defs/HRZoneTarget"
                },
                {
                  "$ref": "#/$defs/HRRangeTarget"
                },
                {
                  "$ref": "#/$defs/PowerZoneTarget"
                },
                {
                  "$ref": "#/$defs/PowerRangeTarget"
                },
                {
                  "$ref": "#/$defs/CadenceRangeTarget"
                }
              ]
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Target"
        }
      },
      "required": [
        "duration"
      ],
      "title": "SimpleStep",
      "type": "object"
    },
    "Sport": {
      "enum": [
        "running"
      ],
      "title": "Sport",
      "type": "string"
    },
    "WorkoutMetadata": {
      "properties": {
        "name": {
          "title": "Name",
          "type": "string"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Description"
        },
        "sport": {
          "$ref": "#/$defs/Sport"
        }
      },
      "required": [
        "name",
        "sport"
      ],
      "title": "WorkoutMetadata",
      "type": "object"
    },
    "WorkoutOptions": {
      "properties": {
        "hr_offset_mode": {
          "$ref": "#/$defs/HROffsetMode",
          "default": "add_100"
        },
        "default_intensity": {
          "$ref": "#/$defs/Intensity",
          "default": "active"
        },
        "repeat_mode_default": {
          "$ref": "#/$defs/RepeatMode",
          "default": "controller"
        }
      },
      "title": "WorkoutOptions",
      "type": "object"
    }
  },
  "properties": {
    "version": {
      "default": 1,
      "minimum": 1,
      "title": "Version",
      "type": "integer"
    },
    "metadata": {
      "$ref": "#/$defs/WorkoutMetadata"
    },
    "options": {
      "$ref": "#/$defs/WorkoutOptions"
    },
    "steps": {
      "items": {
        "discriminator": {
          "mapping": {
            "group": "#/$defs/GroupStep",
            "simple": "#/$defs/SimpleStep"
          },
          "propertyName": "type"
        },
        "oneOf": [
          {
            "$ref": "#/$defs/SimpleStep"
          },
          {
            "$ref": "#/$defs/GroupStep"
          }
        ]
      },
      "title": "Steps",
      "type": "array"
    }
  },
  "required": [
    "metadata",
    "steps"
  ],
  "title": "WorkoutDefinition",
  "type": "object"
}